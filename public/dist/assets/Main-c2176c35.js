import{q as e,A as n,b as t,n as l,j as i,u as a,x as o,c as u,o as r,e as s,B as d,k as c,t as f,y as p,z as v}from"./main-501616b3.js";import{j as m,m as h,ac as g,a2 as b,a5 as x,a3 as y,a6 as w,a7 as I,r as k,t as B,b as T,ap as V,f as C,aT as N,ab as D,q as F,aK as U,aL as M,aM as O,aN as P,aO as R,aP as S,aQ as A,aU as j,F as $,aV as q,c as z,o as E,aW as _,aX as K}from"./index-9eb78a0c.js";const L=m({name:"Add",render:()=>h("svg",{width:"512",height:"512",viewBox:"0 0 512 512",fill:"none",xmlns:"http://www.w3.org/2000/svg"},h("path",{d:"M256 112V400M400 256H112",stroke:"currentColor","stroke-width":"32","stroke-linecap":"round","stroke-linejoin":"round"}))}),H=m({name:"Remove",render:()=>h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},h("line",{x1:"400",y1:"256",x2:"112",y2:"256",style:"\n        fill: none;\n        stroke: currentColor;\n        stroke-linecap: round;\n        stroke-linejoin: round;\n        stroke-width: 32px;\n      "}))}),Q=g({name:"InputNumber",common:b,peers:{Button:e,Input:n},self:e=>{const{textColorDisabled:n}=e;return{iconColorDisabled:n}}});function W(e){return null==e||"string"==typeof e&&""===e.trim()?null:Number(e)}function X(e){return null==e||!Number.isNaN(e)}function G(e,n){return null==e?"":void 0===n?String(e):e.toFixed(n)}function J(e){if(null===e)return null;if("number"==typeof e)return e;{const n=Number(e);return Number.isNaN(n)?null:n}}const Y=x([y("input-number-suffix","\n display: inline-block;\n margin-right: 10px;\n "),y("input-number-prefix","\n display: inline-block;\n margin-left: 10px;\n ")]),Z=m({name:"InputNumber",props:Object.assign(Object.assign({},I.props),{autofocus:Boolean,loading:{type:Boolean,default:void 0},placeholder:String,defaultValue:{type:Number,default:null},value:Number,step:{type:[Number,String],default:1},min:[Number,String],max:[Number,String],size:String,disabled:{type:Boolean,default:void 0},validator:Function,bordered:{type:Boolean,default:void 0},showButton:{type:Boolean,default:!0},buttonPlacement:{type:String,default:"right"},readonly:Boolean,clearable:Boolean,keyboard:{type:Object,default:{}},updateValueOnInput:{type:Boolean,default:!0},parse:Function,format:Function,precision:Number,status:String,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onFocus:[Function,Array],onBlur:[Function,Array],onClear:[Function,Array],onChange:[Function,Array]}),setup(e){const{mergedBorderedRef:n,mergedClsPrefixRef:o,mergedRtlRef:u}=w(e),s=I("InputNumber","-input-number",Y,Q,e,o),{localeRef:d}=t("InputNumber"),f=l(e),{mergedSizeRef:p,mergedDisabledRef:v,mergedStatusRef:m}=f,h=k(null),g=k(null),b=k(null),x=k(e.defaultValue),y=B(e,"value"),D=i(y,x),U=k(""),M=e=>{const n=String(e).split(".")[1];return n?n.length:0},O=a((()=>{const{placeholder:n}=e;return void 0!==n?n:d.value.placeholder})),P=a((()=>{const n=J(e.step);return null!==n?0===n?1:Math.abs(n):1})),R=a((()=>{const n=J(e.min);return null!==n?n:null})),S=a((()=>{const n=J(e.max);return null!==n?n:null})),A=n=>{const{value:t}=D;if(n===t)return void $();const{"onUpdate:value":l,onUpdateValue:i,onChange:a}=e,{nTriggerFormInput:o,nTriggerFormChange:u}=f;a&&c(a,n),i&&c(i,n),l&&c(l,n),x.value=n,o(),u()},j=({offset:n,doUpdateIfValid:t,fixPrecision:l,isInputing:i})=>{const{value:a}=U;if(i&&((o=a).includes(".")&&(/^(-)?\d+.*(\.|0)$/.test(o)||/^\.\d+$/.test(o))))return!1;var o;const u=(e.parse||W)(a);if(null===u)return t&&A(null),null;if(X(u)){const a=M(u),{precision:o}=e;if(void 0!==o&&o<a&&!l)return!1;let r=parseFloat((u+n).toFixed(null!=o?o:(n=>{const t=[e.min,e.max,e.step,n].map((e=>void 0===e?0:M(e)));return Math.max(...t)})(u)));if(X(r)){const{value:n}=S,{value:l}=R;if(null!==n&&r>n){if(!t||i)return!1;r=n}if(null!==l&&r<l){if(!t||i)return!1;r=l}return!(e.validator&&!e.validator(r))&&(t&&A(r),r)}}return!1},$=()=>{const{value:n}=D;if(X(n)){const{format:t,precision:l}=e;t?U.value=t(n):null===n||void 0===l||M(n)>l?U.value=G(n,void 0):U.value=G(n,l)}else U.value=String(n)};$();const q=a((()=>!1===j({offset:0,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1}))),z=a((()=>{const{value:n}=D;if(e.validator&&null===n)return!1;const{value:t}=P;return!1!==j({offset:-t,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})})),E=a((()=>{const{value:n}=D;if(e.validator&&null===n)return!1;const{value:t}=P;return!1!==j({offset:+t,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})}));function _(){const{value:n}=E;if(!n)return void ie();const{value:t}=D;if(null===t)e.validator||A(Z());else{const{value:e}=P;j({offset:e,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})}}function K(){const{value:n}=z;if(!n)return void le();const{value:t}=D;if(null===t)e.validator||A(Z());else{const{value:e}=P;j({offset:-e,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})}}const L=function(n){const{onFocus:t}=e,{nTriggerFormFocus:l}=f;t&&c(t,n),l()},H=function(n){var t,l;if(n.target===(null===(t=h.value)||void 0===t?void 0:t.wrapperElRef))return;const i=j({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0});if(!1!==i){const e=null===(l=h.value)||void 0===l?void 0:l.inputElRef;e&&(e.value=String(i||"")),D.value===i&&$()}else $();const{onBlur:a}=e,{nTriggerFormBlur:o}=f;a&&c(a,n),o(),F((()=>{$()}))};function Z(){if(e.validator)return null;const{value:n}=R,{value:t}=S;return null!==n?Math.max(0,n):null!==t?Math.min(0,t):0}let ee=null,ne=null,te=null;function le(){te&&(window.clearTimeout(te),te=null),ee&&(window.clearInterval(ee),ee=null)}function ie(){ae&&(window.clearTimeout(ae),ae=null),ne&&(window.clearInterval(ne),ne=null)}let ae=null;T(D,(()=>{$()}));const oe={focus:()=>{var e;return null===(e=h.value)||void 0===e?void 0:e.focus()},blur:()=>{var e;return null===(e=h.value)||void 0===e?void 0:e.blur()},select:()=>{var e;return null===(e=h.value)||void 0===e?void 0:e.select()}},ue=V("InputNumber",u,o);return Object.assign(Object.assign({},oe),{rtlEnabled:ue,inputInstRef:h,minusButtonInstRef:g,addButtonInstRef:b,mergedClsPrefix:o,mergedBordered:n,uncontrolledValue:x,mergedValue:D,mergedPlaceholder:O,displayedValueInvalid:q,mergedSize:p,mergedDisabled:v,displayedValue:U,addable:E,minusable:z,mergedStatus:m,handleFocus:L,handleBlur:H,handleClear:function(n){!function(n){const{onClear:t}=e;t&&c(t,n)}(n),A(null)},handleMouseDown:function(e){var n,t,l;(null===(n=b.value)||void 0===n?void 0:n.$el.contains(e.target))&&e.preventDefault(),(null===(t=g.value)||void 0===t?void 0:t.$el.contains(e.target))&&e.preventDefault(),null===(l=h.value)||void 0===l||l.activate()},handleAddClick:()=>{ne||_()},handleMinusClick:()=>{ee||K()},handleAddMousedown:function(){ie(),ae=window.setTimeout((()=>{ne=window.setInterval((()=>{_()}),100)}),800),r("mouseup",document,ie,{once:!0})},handleMinusMousedown:function(){le(),te=window.setTimeout((()=>{ee=window.setInterval((()=>{K()}),100)}),800),r("mouseup",document,le,{once:!0})},handleKeyDown:function(n){var t,l;if("Enter"===n.key){if(n.target===(null===(t=h.value)||void 0===t?void 0:t.wrapperElRef))return;!1!==j({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})&&(null===(l=h.value)||void 0===l||l.deactivate())}else if("ArrowUp"===n.key){if(!E.value)return;if(!1===e.keyboard.ArrowUp)return;n.preventDefault();!1!==j({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})&&_()}else if("ArrowDown"===n.key){if(!z.value)return;if(!1===e.keyboard.ArrowDown)return;n.preventDefault();!1!==j({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})&&K()}},handleUpdateDisplayedValue:function(n){U.value=n,!e.updateValueOnInput||e.format||e.parse||void 0!==e.precision||j({offset:0,doUpdateIfValid:!0,isInputing:!0,fixPrecision:!1})},mergedTheme:s,inputThemeOverrides:{paddingSmall:"0 8px 0 10px",paddingMedium:"0 8px 0 12px",paddingLarge:"0 8px 0 14px"},buttonThemeOverrides:C((()=>{const{self:{iconColorDisabled:e}}=s.value,[n,t,l,i]=N(e);return{textColorTextDisabled:`rgb(${n}, ${t}, ${l})`,opacityDisabled:`${i}`}}))})},render(){const{mergedClsPrefix:e,$slots:n}=this,t=()=>h(d,{text:!0,disabled:!this.minusable||this.mergedDisabled||this.readonly,focusable:!1,theme:this.mergedTheme.peers.Button,themeOverrides:this.mergedTheme.peerOverrides.Button,builtinThemeOverrides:this.buttonThemeOverrides,onClick:this.handleMinusClick,onMousedown:this.handleMinusMousedown,ref:"minusButtonInstRef"},{icon:()=>s(n["minus-icon"],(()=>[h(D,{clsPrefix:e},{default:()=>h(H,null)})]))}),l=()=>h(d,{text:!0,disabled:!this.addable||this.mergedDisabled||this.readonly,focusable:!1,theme:this.mergedTheme.peers.Button,themeOverrides:this.mergedTheme.peerOverrides.Button,builtinThemeOverrides:this.buttonThemeOverrides,onClick:this.handleAddClick,onMousedown:this.handleAddMousedown,ref:"addButtonInstRef"},{icon:()=>s(n["add-icon"],(()=>[h(D,{clsPrefix:e},{default:()=>h(L,null)})]))});return h("div",{class:[`${e}-input-number`,this.rtlEnabled&&`${e}-input-number--rtl`]},h(o,{ref:"inputInstRef",autofocus:this.autofocus,status:this.mergedStatus,bordered:this.mergedBordered,loading:this.loading,value:this.displayedValue,onUpdateValue:this.handleUpdateDisplayedValue,theme:this.mergedTheme.peers.Input,themeOverrides:this.mergedTheme.peerOverrides.Input,builtinThemeOverrides:this.inputThemeOverrides,size:this.mergedSize,placeholder:this.mergedPlaceholder,disabled:this.mergedDisabled,readonly:this.readonly,textDecoration:this.displayedValueInvalid?"line-through":void 0,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeydown:this.handleKeyDown,onMousedown:this.handleMouseDown,onClear:this.handleClear,clearable:this.clearable,internalLoadingBeforeSuffix:!0},{prefix:()=>{var l;return this.showButton&&"both"===this.buttonPlacement?[t(),u(n.prefix,(n=>n?h("span",{class:`${e}-input-number-prefix`},n):null))]:null===(l=n.prefix)||void 0===l?void 0:l.call(n)},suffix:()=>{var i;return this.showButton?[u(n.suffix,(n=>n?h("span",{class:`${e}-input-number-suffix`},n):null)),"right"===this.buttonPlacement?t():null,l()]:null===(i=n.suffix)||void 0===i?void 0:i.call(n)}}))}}),ee=m({name:"Main",components:{NButton:f,NInputNumber:Z,NInput:o},setup(e){E((()=>{o()}));const n=k(""),t=k(""),l=k([]),i=k(""),a=_();async function o(){l.value=await p.invoke(v.getRecord,a.query.name),console.log(l.value),console.log(111)}const u=K();return{route:a,predict:t,records:l,curText:n,list:o,submitResult:async function(){console.log(n),console.log(n.value),""!=n.value&&(p.invoke(v.add,{value:n.value,date:new Date,name:a.query.name},l.value.length),n.value="",o(),console.log(t.value))},onlyAllowNumber:e=>/^[1-4]*$/.test(e),goTo:function(){u.push("/example")},predictValue:async function(){n.value+=""+t.value,console.log(a),console.log(11122);let e=await p.invoke(v.predict,{num:t.value,value:n.value,name:a.query.name});console.log(e),t.value="",i.value=e.split("\n")},text:i}}}),ne={style:{display:"flex","justify-content":"space-between","margin-inline":"20px","margin-block":"10px"}},te={style:{height:"100px","overflow-y":"scroll"}},le={style:{display:"flex","justify-content":"center","margin-block":"20px"}},ie={style:{"font-size":"16px"}};const ae=U(ee,[["render",function(e,n,t,l,i,a){const o=M("n-button"),u=M("n-input"),r=M("n-input-number");return O(),P("div",null,[R("div",ne,[S(o,{onClick:e.goTo},{default:A((()=>[z("返回首页")])),_:1},8,["onClick"]),R("span",null,"预测人："+j(e.route.query.name)+" / 日期 "+j(e.route.query.date),1)]),R("div",te,[(O(!0),P($,null,q(e.records,((e,n)=>(O(),P("p",{key:n},j(e.value.split("").join(",")),1)))),128))]),S(u,{placeholder:"今日预测值",style:{"margin-bottom":"10px"},type:"textarea",rows:3,value:e.curText,"onUpdate:value":n[0]||(n[0]=n=>e.curText=n),"allow-input":e.onlyAllowNumber},null,8,["value","allow-input"]),S(o,{onClick:e.submitResult,type:"info"},{default:A((()=>[z("提交预测")])),_:1},8,["onClick"]),R("div",le,[S(r,{value:e.predict,"onUpdate:value":n[1]||(n[1]=n=>e.predict=n),placeholder:"输入预测值",min:1,max:4,width:"200",style:{"margin-right":"10px"}},null,8,["value"]),S(o,{onClick:e.predictValue,type:"primary"},{default:A((()=>[z("输入并预测")])),_:1},8,["onClick"])]),R("div",ie,[z(" 预测结果："),(O(!0),P($,null,q(e.text,((e,n)=>(O(),P("div",{key:n},j(e),1)))),128))])])}],["__scopeId","data-v-2365aee4"]]);export{ae as default};
